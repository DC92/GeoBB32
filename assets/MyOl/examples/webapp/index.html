<!DOCTYPE html>
<html>

<head>
    <title>MyGPS</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="icon" type="image/x-icon" href="./favicon.png" />

	<!-- Openlayers -->
	<link  href="../../ol/ol.css" type="text/css" rel="stylesheet">
	<script src="../../ol/ol.js"></script>

	<!-- My Openlayers -->
	<link  href="../../myol.css" type="text/css" rel="stylesheet">
	<script src="../../myol.js"></script>

	<!-- This app -->
    <link rel="manifest" href="./manifest.json">
	<script>
		if ('serviceWorker' in navigator)
			navigator.serviceWorker.register('./service-worker.js')
				.then(() => console.log('Service worker registered!'))
	</script>

	<style>
		html, body {
			margin: 0;
			padding: 0;
		}
		#map {
			width: 100vw;
			height: 100vh;
		}
	</style>
</head>

<body>
    <div id="map"></div>

	<script>
		// Must be after the <div> tag
		new ol.MyMap({
			target: 'map',
			controls: [
				controlLayersSwitcher({
					baseLayers: layersCollection({
						IGN: 'hcxdz5f1p9emo4i1lch6ennl', // Get your own (free) IGN key at http://professionnels.ign.fr/ign/contrats
						thunderforest: 'a54d38a8b23f435fa08cfb1d0d0b266e', // Get your own (free) THUNDERFOREST key at https://manage.thunderforest.com
						bing: 'ArLngay7TxiroomF7HLEXCS7kTWexf1_1s1qiF7nbTYs2IkD3XLcUnvSlKbGRZxt' // Get your own (free) BING key at https://www.microsoft.com/en-us/maps/create-a-bing-maps-key
						// SwissTopo : You need to register your domain in https://shop.swisstopo.admin.ch/fr/products/geoservice/swisstopo_geoservices/WMTS_info
					})
				}),
				controlPermalink({
					visible: false
				}),
				new ol.control.ScaleLine(),
				new ol.control.Attribution({
					collapseLabel: '>'
				}),
				new ol.control.MousePosition({
					coordinateFormat: ol.coordinate.createStringXY(5),
					projection: 'EPSG:4326',
					className: 'ol-coordinate',
					undefinedHTML: String.fromCharCode(0)
				}),
				new ol.control.Zoom({
					zoomOutLabel: '-'
				}),
				new ol.control.FullScreen({
					label: '',
					labelActive: '',
					tipLabel: 'Plein écran'
				}),
				controlGPS(),
				controlLoadGPX(),
				new ol.control.Button({
					label: '?',
					activate: function(active) {
						alert(this.title);
					},
					title: 'Pour utiliser les cartes et le GPS hors connexion internet :\n' +
						'Installez l\'application web : explorateur -> options -> ajouter à l\'écran d\'accueil\n' +
						'Choisissez une couche de carte\n' +
						'Placez-vous au point de départ de votre randonnée\n' +
						'Zoomez au niveau le plus détaillé que vous voulez mémoriser\n' +
						'Passez en mode plein écran (mémorise également les échèles supérieures)\n' +
						'Déplacez-vous suivant le trajet de votre randonnée suffisamment lentement pour charger toutes les dalles\n' +
						'Recommencez avec une autre couche de carte si vous voulez en mémoriser plusieurs\n' +
						'Toutes les dalles visualisées une fois seront conservées dans le cache de l\'explorateur\n' +
						'Allez sur le terrain et cliquez sur l\'icône "MyGPS"\n' +
						'Si vous avez un fichier .gpx dans votre mobile, visualisez-le en cliquant sur ⇑\n' +
						'Cette application ne permet pas d\'enregistrer le parcours.'
				})
			]
		});
	</script>
</body>

</html>