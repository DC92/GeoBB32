<!-- Openlayers -->
<!-- INCLUDECSS assets/MyOl/ol/ol.css -->
<!-- INCLUDEJS assets/MyOl/ol/ol.js -->

<!-- Recherche par nom -->
<!-- INCLUDECSS assets/MyOl/geocoder/ol-geocoder.min.css -->
<!-- INCLUDEJS assets/MyOl/geocoder/ol-geocoder.js -->

<!-- Proj4 projections Swiss & UK -->
<!-- INCLUDEJS assets/MyOl/proj4/proj4.js -->

<!-- My Openlayers -->
<!-- INCLUDECSS assets/MyOl/myol.css -->
<!-- INCLUDEJS assets/MyOl/myol.js -->

<!-- Style specific maps functions -->
<!-- INCLUDECSS map.css -->
<!-- INCLUDEJS map.js -->

<div id="map"></div>

<script>
	var map, viseur;

	window.addEventListener('load', function() {
		viseur = marker(targetImage, 'viseur', true);
		map = new ol.Map({
			target: 'map',
			layers: [
			<!-- IF GEO_MAP_TYPE == 'point' -->
				viseur,
			<!-- ENDIF -->
				geoLayer(0, true)
			],
			controls: geobbControls()
		});
		map.addControl(controlLayersSwitcher(
			layers({GEO_OLKEYS})
		));
		map.addControl(controlPermalink({
			init: true, //TODO BUG devrait être calculé !!!
			visible: true
		}));
	});
</script>

<dl class="posting-point" style="clear: left;">
	<!-- IF GEO_MAP_TYPE == 'point' -->
		<input id="viseur-json" name="geom-geometry" type="hidden" value='{GEOJSON}' />
		<p>
			Lon <input id="viseur-lon" type="text" onchange="viseur.edit(this,0,4326)" size="10" maxlength="12"/>
			Lat <input id="viseur-lat" type="text" onchange="viseur.edit(this,1,4326)" size="10" maxlength="12"/>
		</p>
		<p id="viseur-xy">Suisse
			X <input id="viseur-x" type="text" onchange="viseur.edit(this,0,21781)" size="7" maxlength="12"/>
			Y <input id="viseur-y" type="text" onchange="viseur.edit(this,1,21781)" size="7" maxlength="12"/>
		</p>
		
		<p><a style="cursor:pointer" onclick="map.getView().setCenter(viseur.getPoint().getCoordinates())">Recentrer la carte sur le curseur</a></p>
		<p><a style="cursor:pointer" onclick="viseur.getPoint().setCoordinates(map.getView().getCenter())">Remettre le curseur au centre actuel de la carte</a></p>
		<p><a style="cursor:pointer" onclick="geobbControlGps.action()">Utiliser la position du GPS</a></p>

		<br />
	<!-- ENDIF -->
	<p>Altitude <input type="number" name="geo_altitude-int" size="10" class="inputbox autowidth" value="{GEO_ALTITUDE}" />*</p>
	<p>Massif <input type="text" name="geo_massif-varchar-50" size="25" class="inputbox autowidth" value="{GEO_MASSIF}" />*</p>
	<p>Places <input type="text" name="geo_places-int" size="25" class="inputbox autowidth" value="{GEO_PLACES}" /></p>
	<p>Topographie <input type="text" name="geo_topographie-text" size="25" class="inputbox autowidth" value="{GEO_PLACES}" /></p>
	<p><input type="date" name="geo_anniversaire-date"></p>
	<p>* Laisser le champ vide pour que le serveur le détermine automatiquement.</p>
</dl>
